{% extends 'base.html'%}
{% load static %}
{% load social_share %}
{% block meta %}
    {% if post_content_object %}
        <!-- Meta description and keywords for SEO -->
        <meta name="description" content="{{post_content_object.seo_description}}">
        <meta name="keywords" content="{{ post_content_object.seo_keyword}}">
        <meta name="author" content="{{post_content_object.user.first_name}}">
        <meta name="robots" content="index, follow">

        <!-- Open Graph protocol for social media previews facebook/-->
        <meta property="og:title" content="{{ post_content_object.title }}">
        <meta property="og:description" content="{{ post_content_object.short_description }}">
        <meta property="og:url" content="{{ request.build_absolute_uri }}">
        <meta property="og:image" content="{{ post_content_object.feature_image.url }}">
        
        <!-- twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:url" content="{{ request.build_absolute_uri }}">
        <meta property="twitter:title" content="{{ post_content_object.title }}">
        <meta property="twitter:image" content="https://ccba-2400-1a00-b040-f430-d585-c59b-c38d-6eb3.ngrok-free.app{{ post_content_object.feature_image.url }}">
        <meta property="twitter:description" content="{{ post_content_object.short_description }}">
        
    {% endif %}
{% endblock %}
{% block pageheading %}
Post Detail Page
{% endblock pageheading %}


{% block content %}
<div class="main">
    <div class="container1">
        <div class="wrapper">
            <h3 id="share_count">{{ share_post_count }}</h3>
            <p class="p_tag"> Shares</p>
            <div style="height: 1px;width:100%; background: #DBE3EB;margin: 20px 0 10px 0;"></div>
            
            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share_post"> <svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="28.4017" cy="28.4017" r="28.4017" fill="#EEF2F9" />
                    <rect x="12.6221" y="12.623" width="31.5575" height="31.5575" rx="15.7787" fill="#3B5B9C" />
                    <path
                        d="M32.2608 29.4297L32.7105 26.5729H29.9407V24.716C29.9407 23.9349 30.3274 23.1716 31.5639 23.1716H32.8409V20.7388C32.0972 20.6202 31.3458 20.5561 30.5927 20.5469C28.3131 20.5469 26.8248 21.9172 26.8248 24.3946V26.5729H24.2979V29.4297H26.8248V36.3396H29.9407V29.4297H32.2608Z"
                        fill="white" />
                </svg></a>

            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" class="share_post"> <svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="28.4017" cy="28.4056" r="28.4017" fill="#EEF2F9" />
                    <rect x="12.6221" y="12.627" width="31.5575" height="31.5575" rx="15.7787" fill="#33CCFF" />
                    <path
                        d="M36.2348 23.409C35.7137 23.6335 35.1659 23.7898 34.605 23.874C34.8672 23.829 35.2531 23.3565 35.4068 23.1653C35.6401 22.8768 35.818 22.5474 35.9313 22.194C35.9313 22.1677 35.9575 22.1302 35.9313 22.1115C35.9181 22.1043 35.9033 22.1005 35.8882 22.1005C35.8732 22.1005 35.8583 22.1043 35.8451 22.1115C35.236 22.4417 34.5877 22.6937 33.9156 22.8615C33.8921 22.8687 33.8672 22.8693 33.8434 22.8634C33.8197 22.8574 33.798 22.8451 33.7807 22.8278C33.7283 22.7654 33.672 22.7065 33.6121 22.6515C33.3379 22.4057 33.0269 22.2045 32.6904 22.0552C32.2361 21.8687 31.7454 21.7879 31.2554 21.819C30.7799 21.849 30.3156 21.9767 29.8915 22.194C29.4739 22.4231 29.1069 22.7343 28.8125 23.109C28.5028 23.4947 28.2792 23.9422 28.1568 24.4215C28.0558 24.8775 28.0444 25.3488 28.1231 25.8091C28.1231 25.8878 28.1231 25.8991 28.0556 25.8878C25.3842 25.4941 23.1923 24.5453 21.4014 22.509C21.3227 22.419 21.2815 22.419 21.2178 22.509C20.4385 23.694 20.8169 25.5691 21.7911 26.4953C21.9222 26.6191 22.0571 26.7391 22.1994 26.8516C21.7528 26.8199 21.3171 26.6987 20.9181 26.4953C20.8431 26.4466 20.8019 26.4728 20.7982 26.5628C20.7875 26.6876 20.7875 26.8131 20.7982 26.9379C20.8763 27.5358 21.1118 28.1023 21.4804 28.5794C21.8491 29.0564 22.3377 29.4269 22.8963 29.6529C23.0325 29.7113 23.1744 29.7553 23.3197 29.7842C22.9062 29.8656 22.4822 29.8783 22.0646 29.8217C21.9746 29.8029 21.9409 29.8517 21.9746 29.9379C22.5254 31.438 23.7206 31.8955 24.5974 32.1505C24.7173 32.1692 24.8372 32.1692 24.972 32.1992C24.972 32.1992 24.972 32.1992 24.9496 32.2217C24.691 32.6942 23.6457 33.013 23.1661 33.178C22.2907 33.4927 21.3574 33.613 20.431 33.5305C20.2849 33.508 20.2511 33.5118 20.2137 33.5305C20.1762 33.5493 20.2137 33.5905 20.2549 33.628C20.4422 33.7518 20.6296 33.8605 20.8244 33.9655C21.4044 34.2822 22.0176 34.5337 22.6528 34.7155C25.9425 35.6231 29.6443 34.9555 32.1134 32.4992C34.0542 30.5717 34.7361 27.9129 34.7361 25.2503C34.7361 25.1491 34.8597 25.0891 34.9309 25.0366C35.4219 24.6536 35.8548 24.2014 36.2161 23.694C36.2786 23.6184 36.3107 23.5221 36.306 23.424C36.306 23.3678 36.306 23.379 36.2348 23.409Z"
                        fill="white" />
                </svg></a>
                
                
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" target="_blank" class="share_post"><svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="28.4017" cy="28.4095" r="28.4017" fill="#EEF2F9" />
                    <rect x="12.6221" y="12.6309" width="31.5575" height="31.5575" rx="15.7787" fill="#FF0000" />
                    <path
                        d="M27.6298 20.6075C25.0685 20.9005 22.5162 23.0237 22.4108 26.0567C22.3446 27.9085 22.8578 29.2978 24.5779 29.6879C25.3243 28.3387 24.3371 28.0411 24.1836 27.0651C23.5531 23.0653 28.6863 20.3377 31.3725 23.1301C33.2311 25.0637 32.0076 31.0124 29.0098 30.3941C26.1385 29.8035 30.4154 25.0683 28.1235 24.1385C26.2604 23.383 25.2702 26.4498 26.1535 27.9733C25.6358 30.593 24.5207 33.0616 24.9722 36.3475C26.4365 35.2589 26.9301 33.1742 27.3349 31.0001C28.0708 31.458 28.4636 31.9345 29.4026 32.0085C32.8654 32.2829 34.7992 28.4667 34.3267 24.9465C33.9068 21.8256 30.8669 20.2374 27.6298 20.6075Z"
                        fill="white" />
                </svg>
            </a>
            
            <a href="mailto:?subject=Check%20out%20this%20blog%20post&body=I%20thought%20you%20might%20be%20interested%20in%20this%20blog%20post:%20{{ request.build_absolute_uri }}" target="_blank" class="share_post"><svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="28.4017" cy="28.4154" r="28.4017" fill="#EEF2F9" />
                    <rect x="12.6221" y="12.6367" width="31.5575" height="31.5575" rx="15.7787" fill="white" />
                    <path
                        d="M21.1346 34.7267H23.8115V28.2256L19.9873 25.3574V33.5794C19.9873 34.2142 20.5017 34.7267 21.1346 34.7267Z"
                        fill="#4285F4" />
                    <path
                        d="M32.9902 34.7267H35.6672C36.302 34.7267 36.8144 34.2123 36.8144 33.5794V25.3574L32.9902 28.2256"
                        fill="#34A853" />
                    <path
                        d="M32.9902 23.254V28.2255L36.8144 25.3573V23.8277C36.8144 22.4089 35.1949 21.6001 34.061 22.4509"
                        fill="#FBBC04" />
                    <path d="M23.8125 28.2253V23.2539L28.4015 26.6957L32.9905 23.2539V28.2253L28.4015 31.6671"
                        fill="#EA4335" />
                    <path
                        d="M19.9873 23.8277V25.3573L23.8115 28.2255V23.254L22.7407 22.4509C21.6049 21.6001 19.9873 22.4089 19.9873 23.8277Z"
                        fill="#C5221F" />
                </svg>
            </a>
            
        </div>
    </div>
    <div class="innermain">
        <div class="container2">
            {% if post_content_object %}
            <div class="inner2_container2">
                <div
                    style="width:7rem;background-color: #4176FF;color: white;border-radius: 6px;text-align:center;padding:7px;">
                    {{post_content_object.post_category}}
                </div>
                <h1>{{post_content_object.title}}</h1>
            </div>

            <div class="subinner_container1">
                <div class="subinner_innercontainer1">
                    <p class="p_tag">POSTED BY <a class="sign_links" href="#">{{post_content_object.user.first_name}}
                            {{post_content_object.user.last_name}}</a>
                    </p>
                    <div class="inner_container1"><span><svg width="16" height="16" viewBox="0 0 16 13"
                                style="margin-right: 0.6rem;" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.6667 2.66602H3.33333C2.59695 2.66602 2 3.26297 2 3.99935V13.3327C2 14.0691 2.59695 14.666 3.33333 14.666H12.6667C13.403 14.666 14 14.0691 14 13.3327V3.99935C14 3.26297 13.403 2.66602 12.6667 2.66602Z"
                                    stroke="#232E52" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" />
                                <path d="M10.667 1.33398V4.00065" stroke="#232E52" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M5.33301 1.33398V4.00065" stroke="#232E52" stroke-width="1.5"
                                    stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M2 6.66602H14" stroke="#232E52" stroke-width="1.5" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>
                        </span>{{post_content_object.created_at|date:"M d, Y" }}</div>
                    <div class="inner_container1"><span><svg width="24" height="24" viewBox="0 0 22 18"
                                style="margin-right: 0.6rem;" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12 19C15.866 19 19 15.866 19 12C19 8.13401 15.866 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19Z"
                                    stroke="#232E52" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M12.0003 12.0002L9.66699 13.5558M12.0003 8.11133V12.0002" stroke="#232E52"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </span>{{post_content_object.created_at|timesince }} ago</div>
                </div>
            </div>
            <div class="subinner_container2">
                {{ post_content_object.description|safe }}
                <!-- <p class="p_des">
                    
                </p> -->
            </div>
            <!-- <div class="subinner_container3">
                <p><b>Adventure and Recreation: Travel is an invitation to embark on thrilling adventures
                        and
                        engage
                        in recreational activities. Whether it's hiking through mountains, diving in
                        crystal-clear
                        waters, or exploring ancient ruins, travel presents us with exciting
                        opportunities.</b>
                </p>
            </div> -->
            <div style="height: 1px;width:100%; background: #DBE3EB;margin: 20px 0 10px 0;"></div>
            <div class="subinner_container4">
                <div class="subinner_innercontainer4">
                    <div id="likeBtns">
                    {% if user_post_like %}
                    {% if user_post_like_obj %}
                    <div id="dislikeBtn" onclick="dislikeBtn('{{ user_post_like_obj.id }}')" class="heart_btn">
                        <div class="content heart-active">
                            <span class="heart heart-active"></span>
                            <span class="like">Like</span>
                            <span class="num">{{post_like_count}}</span>
                        </div>
                    </div>
                    {% endif %}
                    {% else %}
                    <div id="likeBtn" onclick="likeBtn()" class="heart_btn">
                        <div class="content">
                            <span class="heart"></span>
                            <span class="like">Like</span>
                            <span class="num">{{post_like_count}} </span>
                        </div>
                    </div>
                    {% endif %}
                </div>
                    <div class="subinner2_innercontainer4">
                        <div class="share">
                            <p>Share</p>
                            <i class="fa-solid fa-share" style="color: #a0a4ab;"></i>
                        </div>
                        <div class="hidden_content">
                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" class="share_post"> <svg width="57" height="57" viewBox="0 0 57 57" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="28.4017" cy="28.4017" r="28.4017" fill="#EEF2F9" />
                                    <rect x="12.6221" y="12.623" width="31.5575" height="31.5575" rx="15.7787"
                                        fill="#3B5B9C" />
                                    <path
                                        d="M32.2608 29.4297L32.7105 26.5729H29.9407V24.716C29.9407 23.9349 30.3274 23.1716 31.5639 23.1716H32.8409V20.7388C32.0972 20.6202 31.3458 20.5561 30.5927 20.5469C28.3131 20.5469 26.8248 21.9172 26.8248 24.3946V26.5729H24.2979V29.4297H26.8248V36.3396H29.9407V29.4297H32.2608Z"
                                        fill="white" />
                                </svg></a>
                            <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}" target="_blank" class="share_post"> <svg width="57" height="57" viewBox="0 0 57 57" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="28.4017" cy="28.4056" r="28.4017" fill="#EEF2F9" />
                                    <rect x="12.6221" y="12.627" width="31.5575" height="31.5575" rx="15.7787"
                                        fill="#33CCFF" />
                                    <path
                                        d="M36.2348 23.409C35.7137 23.6335 35.1659 23.7898 34.605 23.874C34.8672 23.829 35.2531 23.3565 35.4068 23.1653C35.6401 22.8768 35.818 22.5474 35.9313 22.194C35.9313 22.1677 35.9575 22.1302 35.9313 22.1115C35.9181 22.1043 35.9033 22.1005 35.8882 22.1005C35.8732 22.1005 35.8583 22.1043 35.8451 22.1115C35.236 22.4417 34.5877 22.6937 33.9156 22.8615C33.8921 22.8687 33.8672 22.8693 33.8434 22.8634C33.8197 22.8574 33.798 22.8451 33.7807 22.8278C33.7283 22.7654 33.672 22.7065 33.6121 22.6515C33.3379 22.4057 33.0269 22.2045 32.6904 22.0552C32.2361 21.8687 31.7454 21.7879 31.2554 21.819C30.7799 21.849 30.3156 21.9767 29.8915 22.194C29.4739 22.4231 29.1069 22.7343 28.8125 23.109C28.5028 23.4947 28.2792 23.9422 28.1568 24.4215C28.0558 24.8775 28.0444 25.3488 28.1231 25.8091C28.1231 25.8878 28.1231 25.8991 28.0556 25.8878C25.3842 25.4941 23.1923 24.5453 21.4014 22.509C21.3227 22.419 21.2815 22.419 21.2178 22.509C20.4385 23.694 20.8169 25.5691 21.7911 26.4953C21.9222 26.6191 22.0571 26.7391 22.1994 26.8516C21.7528 26.8199 21.3171 26.6987 20.9181 26.4953C20.8431 26.4466 20.8019 26.4728 20.7982 26.5628C20.7875 26.6876 20.7875 26.8131 20.7982 26.9379C20.8763 27.5358 21.1118 28.1023 21.4804 28.5794C21.8491 29.0564 22.3377 29.4269 22.8963 29.6529C23.0325 29.7113 23.1744 29.7553 23.3197 29.7842C22.9062 29.8656 22.4822 29.8783 22.0646 29.8217C21.9746 29.8029 21.9409 29.8517 21.9746 29.9379C22.5254 31.438 23.7206 31.8955 24.5974 32.1505C24.7173 32.1692 24.8372 32.1692 24.972 32.1992C24.972 32.1992 24.972 32.1992 24.9496 32.2217C24.691 32.6942 23.6457 33.013 23.1661 33.178C22.2907 33.4927 21.3574 33.613 20.431 33.5305C20.2849 33.508 20.2511 33.5118 20.2137 33.5305C20.1762 33.5493 20.2137 33.5905 20.2549 33.628C20.4422 33.7518 20.6296 33.8605 20.8244 33.9655C21.4044 34.2822 22.0176 34.5337 22.6528 34.7155C25.9425 35.6231 29.6443 34.9555 32.1134 32.4992C34.0542 30.5717 34.7361 27.9129 34.7361 25.2503C34.7361 25.1491 34.8597 25.0891 34.9309 25.0366C35.4219 24.6536 35.8548 24.2014 36.2161 23.694C36.2786 23.6184 36.3107 23.5221 36.306 23.424C36.306 23.3678 36.306 23.379 36.2348 23.409Z"
                                        fill="white" />
                                </svg></a>
                            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" target="_blank" class="share_post"><svg width="57" height="57" viewBox="0 0 57 57" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="28.4017" cy="28.4095" r="28.4017" fill="#EEF2F9" />
                                    <rect x="12.6221" y="12.6309" width="31.5575" height="31.5575" rx="15.7787"
                                        fill="#FF0000" />
                                    <path
                                        d="M27.6298 20.6075C25.0685 20.9005 22.5162 23.0237 22.4108 26.0567C22.3446 27.9085 22.8578 29.2978 24.5779 29.6879C25.3243 28.3387 24.3371 28.0411 24.1836 27.0651C23.5531 23.0653 28.6863 20.3377 31.3725 23.1301C33.2311 25.0637 32.0076 31.0124 29.0098 30.3941C26.1385 29.8035 30.4154 25.0683 28.1235 24.1385C26.2604 23.383 25.2702 26.4498 26.1535 27.9733C25.6358 30.593 24.5207 33.0616 24.9722 36.3475C26.4365 35.2589 26.9301 33.1742 27.3349 31.0001C28.0708 31.458 28.4636 31.9345 29.4026 32.0085C32.8654 32.2829 34.7992 28.4667 34.3267 24.9465C33.9068 21.8256 30.8669 20.2374 27.6298 20.6075Z"
                                        fill="white" />
                                </svg>
                            </a>
                            <a href="mailto:?subject=Check%20out%20this%20blog%20post&body=I%20thought%20you%20might%20be%20interested%20in%20this%20blog%20post:%20{{ request.build_absolute_uri }}" target="_blank" class="share_post"><svg width="57" height="57" viewBox="0 0 57 57" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <circle cx="28.4017" cy="28.4154" r="28.4017" fill="#EEF2F9" />
                                    <rect x="12.6221" y="12.6367" width="31.5575" height="31.5575" rx="15.7787"
                                        fill="white" />
                                    <path
                                        d="M21.1346 34.7267H23.8115V28.2256L19.9873 25.3574V33.5794C19.9873 34.2142 20.5017 34.7267 21.1346 34.7267Z"
                                        fill="#4285F4" />
                                    <path
                                        d="M32.9902 34.7267H35.6672C36.302 34.7267 36.8144 34.2123 36.8144 33.5794V25.3574L32.9902 28.2256"
                                        fill="#34A853" />
                                    <path
                                        d="M32.9902 23.254V28.2255L36.8144 25.3573V23.8277C36.8144 22.4089 35.1949 21.6001 34.061 22.4509"
                                        fill="#FBBC04" />
                                    <path
                                        d="M23.8125 28.2253V23.2539L28.4015 26.6957L32.9905 23.2539V28.2253L28.4015 31.6671"
                                        fill="#EA4335" />
                                    <path
                                        d="M19.9873 23.8277V25.3573L23.8115 28.2255V23.254L22.7407 22.4509C21.6049 21.6001 19.9873 22.4089 19.9873 23.8277Z"
                                        fill="#C5221F" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div id="forms">
                <h3>Leave a Reply</h3>
                <form id="comment_form">
                    {% csrf_token %}
                    <div class="subinner_container5">
                        <input id="comment" type="text"
                            style="width:53rem;margin-top:'2rem'; height: 160px;padding-bottom: 6rem;"
                            placeholder="Type Your Comments..." required>
                        <!-- Add a hidden input field for the post_content_object UUID -->
                        <input type="hidden" id="uuid" name="post_content_object_uuid"
                            value="{{ post_content_object.uuid }}">
                        <button class="post_btn" type="submit">Post a Comment </button>
                    </div>
                </form>
            </div>
            {% endif %}

            <div id="comment_section" class="subinner_container6">
                {% for post_comment_data in posted_comment_object_list %}
                <div class="subinner_innercontainer6">
                    <div class="inner1_container6">

                        <img src="{{ post_comment_data.user.profile.profile_image.url }}">
                        
                        <div class="inner1_innercontainer6">
                            <h3>{{post_comment_data.user.first_name}} {{post_comment_data.user.last_name}}</h3>
                            <p class="p_tag">{{post_comment_data.date}}</p>
                        </div>
                    </div>
                    <div class="inner_container6">
                        <div style="width:2px ;height:auto;background: #DBE3EB;margin-left: 1rem;"></div>
                        <diV class="edit_delete">
                            <p class="p_des">{{post_comment_data.comment}}</p>
                            {% if post_comment_data.user == request.user %}
                            <div class="innerEditDelete">
                                <a href="#" onclick="editCommentBtn('{{ post_comment_data.id }}')"
                                    class="p_tag">Edit</a>
                                <a href="#" class="p_tag"
                                    onclick="deleteCommentBtn('{{ post_comment_data.id }}')">Delete</a>
                            </div>
                            {% endif %}
                        </diV>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div id="load_comment">
                {% if post_content_object %}
                {% if posted_comment_list|length > 4 %}
                <div id="load_more_comments" onclick="loadMoreComment()" class="subinner_container7">
                    <p class="p_tag">Load More Comments</p><span><i class="fa-solid fa-chevron-up fa-rotate-180"
                            style="color: #888888;"></i></span>
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<div class="subinner_container8">
    <div class="subinner_innercontainer8">
        <p class="p_post">NEXT POST</p>
        <b>Vacancy announcement for ED of Nepal Agriculture Research Council</b>
        <p class="p_tag"> You made it so simple. My new site is so much faster and easier to work
            with
            than
            my old site. I just choose the page, make the changes.</p>
    </div>
</div>

<script>
    //for like button
    $(document).ready(function () {
        $('.content').click(function () {
            $('.content').toggleClass("heart-active")
            $('.text').toggleClass("heart-active")
            $('.numb').toggleClass("heart-active")
            $('.heart').toggleClass("heart-active")
        });
    });

    //this is for comment post
    $(document).ready(function () {
        function prependComment(commentData, logged_in_user) {

            var comment = commentData[0];
            console.log(comment, "Comment data:::::::::::")
            var subinner_innercontainer6 = document.createElement("div");
            subinner_innercontainer6.className = "subinner_innercontainer6";

            var inner1_container6 = document.createElement("div");
            inner1_container6.className = "inner1_container6";

            var image = document.createElement("img");
            image.src = comment.user_profile_image;

            var inner1_innercontainer6 = document.createElement("div");
            inner1_innercontainer6.className = "inner1_innercontainer6";

            var h3User = document.createElement("h3");
            h3User.textContent = comment.user_first_name + ' ' + comment.user_last_name;

            var p_tag = document.createElement("p");
            p_tag.className = "p_tag";
            p_tag.textContent = comment.date;

            var inner_container6 = document.createElement("div");
            inner_container6.className = "inner_container6";

            var div = document.createElement("div");
            div.style.width = "2px";
            div.style.height = "auto";
            div.style.background = "#DBE3EB";
            div.style.marginLeft = "1rem";

            var edit_delete = document.createElement("div");
            edit_delete.className = "edit_delete";

            var p_des = document.createElement("p");
            p_des.className = "p_des";
            p_des.textContent = comment.comment;

            var innerEditDelete = document.createElement("div");
            innerEditDelete.className = "innerEditDelete";

            subinner_innercontainer6.appendChild(inner1_container6);
            inner1_container6.appendChild(image);
            inner1_container6.appendChild(inner1_innercontainer6);
            inner1_innercontainer6.appendChild(h3User);
            inner1_innercontainer6.appendChild(p_tag);

            subinner_innercontainer6.appendChild(inner_container6)

            inner_container6.appendChild(div);
            inner_container6.appendChild(edit_delete);
            edit_delete.appendChild(p_des);
            edit_delete.appendChild(innerEditDelete);


            if (comment.username === logged_in_user) {
                console.log("Adding button here, ______________")

                var editButton = document.createElement("a");
                editButton.id = "editCommentbtn";
                editButton.className = "p_tag";
                editButton.textContent = "Edit";
                editButton.setAttribute("onclick", "editCommentBtn('" + comment.id + "')");

                var deleteButton = document.createElement("a");
                deleteButton.className = "p_tag";
                deleteButton.textContent = "Delete";
                deleteButton.setAttribute("onclick", "deleteCommentBtn('" + comment.id + "')");

                innerEditDelete.appendChild(editButton);
                innerEditDelete.appendChild(deleteButton);
                console.log("We came here")

            }

            if (comment.posted_comment_list.length >= 5) {

                $('#comment_section').children().last().remove();

                $('#comment_section').prepend(subinner_innercontainer6);

                var subinner_container7 = document.createElement("div");
                subinner_container7.className = "subinner_container7";
                subinner_container7.id = "load_more_comments";
                subinner_container7.setAttribute("onclick", "loadMoreComment()");

                var p_tag = document.createElement("p");
                p_tag.className = "p_tag";
                p_tag.textContent = "Load More Comments";

                var span = document.createElement("span");

                var chevron_icon = document.createElement("i");
                chevron_icon.className = "fa-solid fa-chevron-up fa-rotate-180";
                chevron_icon.style.color = "#888888";

                span.appendChild(chevron_icon);

                subinner_container7.appendChild(p_tag);
                subinner_container7.appendChild(span);

                if ($('#load_more_comments').length === 0) {
                    console.log($('#load_more_comments').length)
                    $('#load_comment').append(subinner_container7);
                }

            } else {

                $('#comment_section').prepend(subinner_innercontainer6);

            }


        }

        $('#comment_form').submit(function (event) {
            event.preventDefault();
            var comment = $('#comment').val();
            var post_id = $('#uuid').val();
            var csrftoken = $('[name=csrfmiddlewaretoken]').val();
            $.ajax({
                type: 'POST',
                url: '/blog/post-comment/',
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: {
                    comment: comment,
                    post_id: post_id
                },
                success: function (response) {
                    var commentData = response;

                    var login_user_with_post_comment = commentData[0].login

                    if (login_user_with_post_comment === true) {
                        var logged_in_user = commentData[0].logged_in_user;
                        $('#comment_form')[0].reset();

                        prependComment(commentData, logged_in_user); // Call the prependComment function here
                    }
                    else {
                        window.location.href = "{% url 'login' %}";
                    }
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });
    });

    // Comment Edit Button
    function editCommentBtn(commentId) {
        var post_id = $('#uuid').val();
        $.ajax({
            type: 'GET',
            url: '/blog/edit-comment/',
            data: {
                post_id: post_id,
                commentId: commentId
            },
            success: function (response) {

                var get_comment = response.comments[0].desired_comment
                console.log("Comment", get_comment)

                $('#comment_form').hide();

                // Create the form element
                var comment_update_form = document.createElement("form");
                comment_update_form.setAttribute("id", "comment_update_form");

                // Create a CSRF token input field
                var csrfInput = document.createElement("input");
                csrfInput.setAttribute("type", "hidden");
                csrfInput.setAttribute("name", "csrfmiddlewaretoken");
                csrfInput.setAttribute("value", "{{ csrf_token }}");
                comment_update_form.appendChild(csrfInput);


                var subinner_container5 = document.createElement("div")
                subinner_container5.className = "subinner_container5";
                comment_update_form.appendChild(subinner_container5)


                var commentInput = document.createElement("input");
                commentInput.setAttribute("name", "comment");
                commentInput.setAttribute("id", "update_comment");
                commentInput.setAttribute("type", "text");
                commentInput.setAttribute("style", "width:53rem;margin-top:'2rem'; height: 160px;padding-bottom: 6rem;");
                commentInput.setAttribute("placeholder", "Type Your Comments...");
                commentInput.setAttribute("required", "required");
                commentInput.value = get_comment;
                subinner_container5.appendChild(commentInput);

                // Create a hidden input field for the post_content_object UUID
                var uuidInput = document.createElement("input");
                uuidInput.setAttribute("type", "hidden");
                uuidInput.setAttribute("id", "uuid");
                uuidInput.setAttribute("name", "post_content_object_uuid");
                uuidInput.setAttribute("value", "{{ post_content_object.uuid }}");
                subinner_container5.appendChild(uuidInput);


                // Create the submit button
                var updateBtn = document.createElement("button");
                updateBtn.className = "post_btn";
                updateBtn.setAttribute("type", "submit");
                updateBtn.setAttribute("onclick", "updateCommentBtn('" + commentId + "')")
                updateBtn.textContent = "Update Comment";
                subinner_container5.appendChild(updateBtn);

                // to add the update comment form at once time
                if ($('#comment_update_form').length === 0) {
                    $('#forms').append(comment_update_form);
                }

                // Listen for keydown event on the textarea
                $('#update_comment').on('keydown', function (event) {
                    // Check if the pressed key is the enter key (key code 13)
                    if (event.keyCode === 13) {
                        // Trigger the click event of the update button
                        $(updateBtn).trigger('click');
                    }
                });

            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    // Comment Update Button
    function updateCommentBtn(commentId) {
        var post_id = $('#uuid').val();
        var update_comment = $('#update_comment').val();
        var csrftoken = $('[name=csrfmiddlewaretoken]').val();
        console.log(post_id, update_comment, "All ATTRIBUTE")
        $.ajax({
            type: 'POST',
            url: '/blog/update-comment/',
            headers: {
                'X-CSRFToken': csrftoken
            },
            data: {
                update_comment: update_comment,
                post_id: post_id,
                commentId: commentId
            },
            success: function (response) {
                console.log(response);
            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    // Comment Delete Button
    function deleteCommentBtn(commentId) {
        var post_id = $('#uuid').val();
        var csrftoken = $('[name=csrfmiddlewaretoken]').val();
        $.ajax({
            type: 'POST',
            url: '/blog/delete-comment/',
            headers: {
                'X-CSRFToken': csrftoken
            },
            data: {
                post_id: post_id,
                commentId: commentId
            },
            success: function (response) {
                console.log(response);
                if (response.message === 'Comment deleted successfully') {
                    location.reload();
                }
            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    // For Loadmorecomments
    var count = 4;  // Initial count of comments
    function loadMoreComment() {
        var post_id = $('#uuid').val();
        $.ajax({
            type: 'GET',
            url: '/blog/load-more-comment/',
            data: {
                post_id: post_id,
                count: count    // Pass the current count of comments
            },
            success: function (response) {
                var commentData = response.comments;

                // to remove the loadmorebutton, when all comments already shown
                if (commentData.length <= 3) {
                    $('#load_comment').remove();
                }

                var div = '';

                var logged_in_user = commentData[0].logged_in_user;

                for (var i = 0; i < commentData.length; i++) {

                    var comment = commentData[i];
                    console.log("Comment data", comment);

                    var subinner_innercontainer6 = document.createElement("div");
                    subinner_innercontainer6.className = "subinner_innercontainer6";

                    var inner1_container6 = document.createElement("div");
                    inner1_container6.className = "inner1_container6";

                    var image = document.createElement("img");
                    image.src = comment.user_profile_image;

                    var inner1_innercontainer6 = document.createElement("div");
                    inner1_innercontainer6.className = "inner1_innercontainer6";

                    var h3User = document.createElement("h3");
                    h3User.textContent = comment.user_first_name + ' ' + comment.user_last_name;

                    var p_tag = document.createElement("p");
                    p_tag.className = "p_tag";
                    p_tag.textContent = comment.date;

                    var inner_container6 = document.createElement("div");
                    inner_container6.className = "inner_container6";

                    var div = document.createElement("div");
                    div.style.width = "2px";
                    div.style.height = "auto";
                    div.style.background = "#DBE3EB";
                    div.style.marginLeft = "1rem";

                    var edit_delete = document.createElement("div");
                    edit_delete.className = "edit_delete";

                    var p_des = document.createElement("p");
                    p_des.className = "p_des";
                    p_des.textContent = comment.comment;

                    var innerEditDelete = document.createElement("div");
                    innerEditDelete.className = "innerEditDelete";


                    subinner_innercontainer6.appendChild(inner1_container6);
                    inner1_container6.appendChild(image);
                    inner1_container6.appendChild(inner1_innercontainer6);
                    inner1_innercontainer6.appendChild(h3User);
                    inner1_innercontainer6.appendChild(p_tag);

                    subinner_innercontainer6.appendChild(inner_container6)

                    inner_container6.appendChild(div);
                    inner_container6.appendChild(edit_delete);
                    edit_delete.appendChild(p_des);
                    edit_delete.appendChild(innerEditDelete);


                    if (comment.username === logged_in_user) {

                        var editButton = document.createElement("a");
                        editButton.id = "editCommentbtn";
                        editButton.className = "p_tag";
                        editButton.textContent = "Edit";
                        editButton.setAttribute("onclick", "editCommentBtn('" + comment.id + "')");

                        var deleteButton = document.createElement("a");
                        deleteButton.className = "p_tag";
                        deleteButton.textContent = "Delete";
                        deleteButton.setAttribute("onclick", "deleteCommentBtn('" + comment.id + "')");

                        innerEditDelete.appendChild(editButton);
                        innerEditDelete.appendChild(deleteButton);
                        console.log("We came here")

                    }
                    $('#comment_section').append(subinner_innercontainer6);
                }

                count = response.count;  // Update the count for the next request

            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    // Post like Button
    function likeBtn() {
        var post_id = $('#uuid').val();
        var csrftoken = $('[name=csrfmiddlewaretoken]').val();
        console.log(post_id, "This is post id")
        $.ajax({
            type: 'POST',
            url: '/blog/like-btn/',
            headers: {
                'X-CSRFToken': csrftoken
            },
            data: {
                post_id: post_id
            },
            success: function (response) {

                console.log(response);
                var login_user_with_post_like = response.saved_post_like[0].login

                if (login_user_with_post_like === true){
                    var get_post_like_id = response.saved_post_like[0].post_like_id
                    var get_post_like_user = response.saved_post_like[0].post_like_user
                    var get_post_like_count = response.saved_post_like[0].post_like_count

                    $('#likeBtn').remove();

                    var subinner_innercontainer4 = document.createElement("div");
                    subinner_innercontainer4.className = "subinner_innercontainer4";

                    var dislikeBtn = document.createElement("div");
                    dislikeBtn.setAttribute("id", "dislikeBtn");
                    dislikeBtn.setAttribute("class", "heart_btn");
                    dislikeBtn.setAttribute("onclick", "dislikeBtn(('" + get_post_like_id + "'))");
                    
                    var content = document.createElement("div");
                    content.setAttribute("class","content heart-active");
                    
                    var heart = document.createElement("span")
                    heart.setAttribute("class","heart heart-active");
                    
                    var like = document.createElement("span")
                    like.setAttribute("class","like");
                    like.textContent = "Like";

                    var num = document.createElement("span");
                    num.setAttribute("id","likeCount")
                    num.setAttribute("class","num");
                    num.textContent = get_post_like_count;
                    
                    // Post Like count convert into K, M, B
                    $(document).ready(function() {
                    const likeCountElement = $("#likeCount");
                    const likeCount = likeCountElement.text();
        
                    if(likeCount >= 1000000000){
                        likeCountElement.text((likeCount / 1000000000).toFixed(1) + "B");
                    }
                    else if (likeCount >= 1000000) {
                        likeCountElement.text((likeCount / 1000000).toFixed(1) + "M");
                    }
                    else if (likeCount >= 1000) {
                        likeCountElement.text((likeCount / 1000).toFixed(1) + "k");
                    }
                    });
                    
                    dislikeBtn.appendChild(content);
                    content.appendChild(heart);
                    content.appendChild(like);
                    content.appendChild(num);
                    
                    $('#likeBtns').append(dislikeBtn);

                }
                else{
                    window.location.href = "{% url 'login' %}";
                }
            },
            error: function (error) {
                console.log(error);
            }
        });
    }

    //Post dislike Button
    function dislikeBtn(post_like_id) {
        var post_id = $('#uuid').val();

        var csrftoken = $('[name=csrfmiddlewaretoken]').val();
        $.ajax({
            type: 'POST',
            url: '/blog/dislike-btn/',
            headers: {
                'X-CSRFToken': csrftoken
            },
            data: {
                post_id: post_id,
                post_like_id: post_like_id
            },
            success: function (response) {
                console.log(response);
                var get_post_like_count = response.data[0].post_like_count
                
                $('#dislikeBtn').remove();

                var subinner_innercontainer4 = document.createElement("div");
                subinner_innercontainer4.className = "subinner_innercontainer4";

                var likeBtn = document.createElement("div");
                likeBtn.setAttribute("id", "likeBtn");
                likeBtn.setAttribute("class", "heart_btn");
                likeBtn.setAttribute("onclick", "likeBtn()");
                    
                var content = document.createElement("div");
                content.setAttribute("class","content");
                    
                var heart = document.createElement("span")
                heart.setAttribute("class","heart");
                    
                var like = document.createElement("span")
                like.setAttribute("class","like");
                like.textContent = "Like";

                var num = document.createElement("span");
                num.setAttribute("id","dislikeCount")
                num.setAttribute("class","num");
                num.textContent = get_post_like_count;

                // Post Like count convert into K, M, B
                $(document).ready(function() {
                    const likeCountElement = $("#dislikeCount");
                    const likeCount = likeCountElement.text();
        
                    if(likeCount >= 1000000000){
                        likeCountElement.text((likeCount / 1000000000).toFixed(1) + "B");
                    }
                    else if (likeCount >= 1000000) {
                        likeCountElement.text((likeCount / 1000000).toFixed(1) + "M");
                    }
                    else if (likeCount >= 1000) {
                        likeCountElement.text((likeCount / 1000).toFixed(1) + "k");
                    }
                });
                
                likeBtn.appendChild(content);
                content.appendChild(heart);
                content.appendChild(like);
                content.appendChild(num);
                
                $('#likeBtns').append(likeBtn);
            },
            error: function (error) {
                console.log(error);
            }

        });
    }

    // Post Share count
    $(document).ready(function(){
        $('.share_post').click(function(){
            var post_id = $('#uuid').val();
            var csrftoken = $('[name=csrfmiddlewaretoken]').val();
            $.ajax({
                type: 'POST',
                url: '/blog/share-post/',
                headers: {
                    'X-CSRFToken': csrftoken
                },
                data: {
                    post_id: post_id
                },
                success: function (response) {
                    var share_count_data = response.share_post_object_count[0].post_share_count
                    $('#share_count').text(share_count_data);

                    // Shared post count convert into K, M, B when using ajax
                    const shareCountElement = $("#share_count");
                    const shareCount = shareCountElement.text();
                    
                    if(shareCount >= 1000000000){
                        shareCountElement.text((shareCount / 1000000000).toFixed(1) + "B");
                    }
                    else if (shareCount >= 1000000) {
                        shareCountElement.text((shareCount / 1000000).toFixed(1) + "M");
                    }
                    else if (shareCount >= 1000) {
                        shareCountElement.text((shareCount / 1000).toFixed(1) + "k");
                    }
                },
                error: function (error) {
                    console.log(error);
                }
            });
        });
    });

    // Shared post count convert into K, M, B
    $(document).ready(function() {
        const shareCountElement = $("#share_count");
        const shareCount = shareCountElement.text();
        
        if(shareCount >= 1000000000){
            shareCountElement.text((shareCount / 1000000000).toFixed(1) + "B");
        }
        else if (shareCount >= 1000000) {
            shareCountElement.text((shareCount / 1000000).toFixed(1) + "M");
        }
        else if (shareCount >= 1000) {
            shareCountElement.text((shareCount / 1000).toFixed(1) + "k");
        }
    });

    // Post Like count convert into K, M, B
    $(document).ready(function() {
        const likeCountElement = $(".num");
        const likeCount = likeCountElement.text();
        
        if(likeCount >= 1000000000){
            likeCountElement.text((likeCount / 1000000000).toFixed(1) + "B");
        }
        else if (likeCount >= 1000000) {
            likeCountElement.text((likeCount / 1000000).toFixed(1) + "M");
        }
        else if (likeCount >= 1000) {
            likeCountElement.text((likeCount / 1000).toFixed(1) + "k");
        }
    });
</script>

{% endblock content %}